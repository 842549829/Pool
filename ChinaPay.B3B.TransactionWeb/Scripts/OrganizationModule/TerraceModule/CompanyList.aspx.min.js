$(function () {
    $("#btnQuery").click(function () {
        $("#hfdSearchCondition").val($("#txtAbbreviateName").val() + ',' + $("#ddlCompanyType").val() + ',' + $("#ddlAccountType").val() + ',' + $("#txtContact").val() + ',' + $("#txtAccount").val() + ',' + $("#ddlStatus").val());
    });
    var accountType;
    $(".merchant").click(function () {
        $("#divOpcial").click().show();
        $("#div_Merchant").show();
        $("#lblWarnRateInfo").text("");
        $("#lblWarnCertNoInfo").text("");
        $("#div_Merchant").css("position", "absolute");
        $("#div_Merchant").css("top", "200px");
        $("#div_Merchant").css("left", "150px");
        $("#txtPosRate").val("");
        $("#txtContactCertNo").val("");
        $("#hfdCompanyId").val($(this).attr("tip"));
        accountType = $(this).attr("accountType");
        if ($(this).attr("accountType") == "0") {
            $(".certNo").hide();
        }
    });
    $("#btnSave").click(function () {
        var certNo = $.trim($("#txtContactCertNo").val());
        var posRate = $.trim($("#txtPosRate").val());
        var ratePattern = /^(0\.[5-9]\d?|[1-2]\.\d{1,2}|3\.0{1,2}|[1-3])$/;
        if (!ratePattern.test(posRate)) {
            $("#lblWarnRateInfo").text("Pos费率格式错误！");
            $("#txtPosRate").select();
            return false;
        }
        if (accountType == "1") {
            if (certNo == "" || !isCardID(certNo)) {
                $("#lblWarnCertNoInfo").text("联系人身份证号格式错误！");
                $("#txtContactCertNo").select();
                return false;
            }
        }
        return true;
    });
    pageName = 'CompanyList';
});
function ResetCompanyPWd(companyId) {
    $("#hdCompanyAccount").val(companyId);
    $(".fixed,.layers").show();
}
function CancleReset() {
    $(".fixed,.layers").hide();
}
function CheckReason() {
    var val = $("#Reason").val();
    if ($.trim(val) == "") {
        alert("重置密码，必须输入原因！");
        $("#Reason").select();
        return false;
    }
    return true;
}